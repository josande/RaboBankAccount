# RaboBankAccount
Code to simple bank account

The application was built using Spring boot and Maven

#### To start via maven

To start via maven, navigate to the project base directory and run  
$*mvn spring-boot:run*

#### To start via Docker

To start as Docker container, navigate to the project base directory and run  
./mvnw install
docker build -t rabo/bankapp .  
docker run -p 8080:8080 -e "JAVA_OPTS=-Ddebug -Xmx128m" rabo/bankapp  
`
`
#### To use:
* The system uses Java Web Token (JWT) to handle users and sessions.
* To retrieve a token, First Create a user or Admin in the auth controller, and then log in with the same credentials and the token is in the response.
* Once you have a valid token, add it in the header as a normal Bearer token.
* If you use the Swagger API page there is a [Authorize] button to handle this for you.
* Once you have a User, you can go ahead and create an Account ( with some money to start, Go have fun!)
* Cards are connected to Accounts, and can be created once an account is present.
* Transfers and Withdrawals can be made From accounts (no fee) or from a Card (fee for Credit card apply)
* Transfers and Withdrawals are logged, and a user with the Admin role can see the event log via the /audit controller

#### Database

The application runs with a H2 in-memory database.  
To change to a persistent storage, update settings in  
[application.properties](src/main/resources/application.properties)  
and add the corresponding database driver to the [pom.xml](pom.xml)

#### API Documentation

Once started, generated API documentation can be found at [http://localhost:8080/swagger-ui/index.html](http://localhost:8080/swagger-ui/index.html) 


### Architectural decisions

* The architecture is kept intentionally basic.
* User accounts and Admin accounts are created by the /auth/ controller, which is the only one not requiring a JWT token to access.
* 
* RESTapi documentations is generated by openapi rather than written, as keeping it all in one place makes it more likely to be updated when changes happens, and keeps the documentations uniform.
* Basic healthcheck using Spring Boot actuator, located at [http://localhost:8080/actuator/health]([http://localhost:8080/actuator/health)  


#### Assignment:
Write some code in Java to simulate a simple bank account. It should be possible to transfer and withdraw money from an account. It is
possible to pay with either debit card or credit card. If a transfer/withdraw is done with a credit card, 1% of the amount is charged extra.
Use design patterns where applicable and write some test cases as well.

Specifications:

A negative balance is not possible
• Account should contain at least some user details, card details and current balance
• One rest endpoint to see current available balance in all accounts
• One rest endpoint to withdraw money
• One rest endpoint to transfer money
• One credit card or debit card is linked with one account
• It should be able to audit transfers or withdrawals
• Front end part is not required
• Feel free to make some assumptions if needed & mention them in the code assignment
• For Security, implement authentication for the API endpoints